import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as o}from"./index-oxIuDU2I.js";import"./_commonjsHelpers-CqkleIqs.js";const R="_root_vq3c7_1",V="_label_vq3c7_7",W="_input_vq3c7_14",K="_panel_vq3c7_27",U="_state_vq3c7_34",B="_list_vq3c7_40",F="_item_vq3c7_46",G="_itemActive_vq3c7_59",H="_itemName_vq3c7_63",J="_itemSub_vq3c7_68",a={root:R,label:V,input:W,panel:K,state:U,list:B,item:F,itemActive:G,itemName:H,itemSub:J};function u({label:i="Medication",placeholder:n="Search medications",query:s,onQueryChange:l,results:e,loading:d=!1,emptyText:D="No results",onSelect:S}){const[v,m]=o.useState(-1),p=o.useMemo(()=>`med-search-${Math.random().toString(16).slice(2)}`,[]),I=o.useRef(null);o.useEffect(()=>{m(e.length>0?0:-1)},[e]);const y=v>=0?e[v]:void 0,$=d||e.length>0||s.trim().length>0&&e.length===0;function O(t){if(t.key==="ArrowDown"){if(t.preventDefault(),e.length===0)return;m(c=>Math.min(c+1,e.length-1));return}if(t.key==="ArrowUp"){if(t.preventDefault(),e.length===0)return;m(c=>Math.max(c-1,0));return}if(t.key==="Enter"){y&&S(y);return}if(t.key==="Escape"){m(-1);return}}return r.jsxs("div",{className:a.root,children:[r.jsxs("label",{className:a.label,children:[i,r.jsx("input",{ref:I,className:a.input,value:s,placeholder:n,onChange:t=>l(t.target.value),onKeyDown:O,role:"combobox","aria-expanded":$,"aria-controls":p,"aria-autocomplete":"list","aria-activedescendant":y?`${p}-${y.id}`:void 0})]}),r.jsx("div",{className:a.panel,children:d?r.jsx("div",{className:a.state,children:"Loadingâ€¦"}):e.length===0?r.jsx("div",{className:a.state,children:D}):r.jsx("ul",{className:a.list,role:"listbox",id:p,"aria-label":"Medication results",children:e.map((t,c)=>{const _=c===v;return r.jsxs("li",{id:`${p}-${t.id}`,role:"option","aria-selected":_,tabIndex:-1,className:[a.item,_?a.itemActive:""].join(" "),onMouseEnter:()=>m(c),onMouseDown:k=>k.preventDefault(),onClick:()=>S(t),children:[r.jsx("div",{className:a.itemName,children:t.name}),t.subtitle?r.jsx("div",{className:a.itemSub,children:t.subtitle}):null]},t.id)})})})]})}u.__docgenInfo={description:"",methods:[],displayName:"MedicationSearch",props:{label:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Medication"',computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Search medications"',computed:!1}},query:{required:!0,tsType:{name:"string"},description:""},onQueryChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(q: string) => void",signature:{arguments:[{type:{name:"string"},name:"q"}],return:{name:"void"}}},description:""},results:{required:!0,tsType:{name:"Array",elements:[{name:"MedicationOption"}],raw:"MedicationOption[]"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},emptyText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"No results"',computed:!1}},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(med: MedicationOption) => void",signature:{arguments:[{type:{name:"MedicationOption"},name:"med"}],return:{name:"void"}}},description:""}}};const z=[{id:"amox",name:"Amoxicillin",subtitle:"500 mg capsule"},{id:"ibu",name:"Ibuprofen",subtitle:"200 mg tablet"},{id:"acet",name:"Acetaminophen",subtitle:"500 mg tablet"},{id:"azith",name:"Azithromycin",subtitle:"250 mg tablet"}],Z={title:"Components/MedicationSearch",component:u,args:{label:"Medication",placeholder:"Search medications",emptyText:"No results"}},g={render:i=>{const[n,s]=o.useState(""),l=o.useMemo(()=>{const e=n.trim().toLowerCase();return e?z.filter(d=>d.name.toLowerCase().includes(e)):[]},[n]);return r.jsx(u,{...i,query:n,onQueryChange:s,results:l,onSelect:e=>alert(`Selected: ${e.name}`)})}},h={render:i=>{const[n,s]=o.useState("a"),l=z.filter(e=>e.name.toLowerCase().includes(n));return r.jsx(u,{...i,query:n,onQueryChange:s,results:l,onSelect:()=>{}})}},f={render:i=>{const[n,s]=o.useState("zzz");return r.jsx(u,{...i,query:n,onQueryChange:s,results:[],onSelect:()=>{}})}},q={render:i=>{const[n,s]=o.useState("am");return r.jsx(u,{...i,query:n,onQueryChange:s,results:[],loading:!0,onSelect:()=>{}})}};var x,b,M;g.parameters={...g.parameters,docs:{...(x=g.parameters)==null?void 0:x.docs,source:{originalSource:`{
  render: args => {
    const [query, setQuery] = useState("");
    const results = useMemo(() => {
      const q = query.trim().toLowerCase();
      if (!q) return [];
      return all.filter(m => m.name.toLowerCase().includes(q));
    }, [query]);
    return <MedicationSearch {...args} query={query} onQueryChange={setQuery} results={results} onSelect={m => alert(\`Selected: \${m.name}\`)} />;
  }
}`,...(M=(b=g.parameters)==null?void 0:b.docs)==null?void 0:M.source}}};var Q,C,N;h.parameters={...h.parameters,docs:{...(Q=h.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  render: args => {
    const [query, setQuery] = useState("a");
    const results = all.filter(m => m.name.toLowerCase().includes(query));
    return <MedicationSearch {...args} query={query} onQueryChange={setQuery} results={results} onSelect={() => {}} />;
  }
}`,...(N=(C=h.parameters)==null?void 0:C.docs)==null?void 0:N.source}}};var j,w,A;f.parameters={...f.parameters,docs:{...(j=f.parameters)==null?void 0:j.docs,source:{originalSource:`{
  render: args => {
    const [query, setQuery] = useState("zzz");
    return <MedicationSearch {...args} query={query} onQueryChange={setQuery} results={[]} onSelect={() => {}} />;
  }
}`,...(A=(w=f.parameters)==null?void 0:w.docs)==null?void 0:A.source}}};var T,E,L;q.parameters={...q.parameters,docs:{...(T=q.parameters)==null?void 0:T.docs,source:{originalSource:`{
  render: args => {
    const [query, setQuery] = useState("am");
    return <MedicationSearch {...args} query={query} onQueryChange={setQuery} results={[]} loading onSelect={() => {}} />;
  }
}`,...(L=(E=q.parameters)==null?void 0:E.docs)==null?void 0:L.source}}};const ee=["Default","WithResults","Empty","Loading"];export{g as Default,f as Empty,q as Loading,h as WithResults,ee as __namedExportsOrder,Z as default};
